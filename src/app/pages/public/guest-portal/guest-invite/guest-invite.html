<div class="min-h-[80vh] flex items-center justify-center bg-gray-50 dark:bg-[#0a0a0a] px-6 py-10">
  <div class="max-w-lg w-full bg-white/70 dark:bg-[#111]/80 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-xl p-8 text-center">
    @if (!error()) {
      <ng-container>
        <h1 class="text-2xl md:text-3xl font-extrabold text-gray-900 dark:text-white mb-2">
          You're invited to <span class="text-orange-500">{{ event()?.name }}</span>
        </h1>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
          {{ event()?.startDate }} → {{ event()?.endDate }}
        </p>

        <p class="text-gray-800 dark:text-gray-300 mb-8">
          Hello <strong class="text-orange-400">{{ guest()?.name || guest()?.email }}</strong> 👋
        </p>

        @if (guest()?.status === 'Invited' || guest()?.status === 'Pending') {
          <div class="flex flex-wrap justify-center gap-4 mb-6">
            <button
              (click)="accept()"
              class="relative inline-flex items-center justify-center text-sm font-semibold uppercase border-2 border-green-500 text-green-500 px-6 py-2 rounded-md overflow-hidden transition-all duration-500 group hover:scale-105">
              <span class="absolute inset-0 bg-green-500 -translate-x-full translate-y-full group-hover:translate-x-0 group-hover:translate-y-0 transition-transform duration-700 ease-out"></span>
              <span class="relative z-10 group-hover:text-white flex items-center gap-2">
                ✔ Accept
              </span>
            </button>

            <button
              (click)="decline()"
              class="relative inline-flex items-center justify-center text-sm font-semibold uppercase border-2 border-red-500 text-red-500 px-6 py-2 rounded-md overflow-hidden transition-all duration-500 group hover:scale-105">
              <span class="absolute inset-0 bg-red-500 -translate-x-full translate-y-full group-hover:translate-x-0 group-hover:translate-y-0 transition-transform duration-700 ease-out"></span>
              <span class="relative z-10 group-hover:text-white flex items-center gap-2">
                ✕ Decline
              </span>
            </button>
          </div>
        }

        @if (guest()?.status === 'Accepted') {
          <div class="mb-6 p-3 rounded-md bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300 border border-green-300 dark:border-green-700">
            ✅ You have accepted. See you there!
          </div>
        } @else if (guest()?.status === 'Declined') {
          <div class="mb-6 p-3 rounded-md bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 border border-red-300 dark:border-red-700">
            ❌ You have declined. Maybe next time.
          </div>
        }

        <!-- Feedback block (self-gated) -->
        <app-guest-feedback [token]="token"></app-guest-feedback>
      </ng-container>
    } @else {
      <div class="p-4 rounded-md bg-red-100 dark:bg-red-900/40 border border-red-300 dark:border-red-700 text-red-700 dark:text-red-300">
        {{ error() }}
      </div>
    }
  </div>
</div>
