<style>
  @keyframes fadeInUp {
    0% { opacity: 0; transform: translateY(20px); }
    100% { opacity: 1; transform: translateY(0); }
  }
  @keyframes pulseGlow {
    0% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4); }
    50% { box-shadow: 0 0 10px 5px rgba(99, 102, 241, 0.2); }
    100% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4); }
  }
  .animate-fadeInUp {
    animation: fadeInUp 0.6s ease-out forwards;
  }
  .animate-pulseGlow {
    animation: pulseGlow 2s infinite;
  }
</style>

<div class="min-h-screen w-full flex flex-col lg:flex-row items-center justify-between bg-gradient-to-br from-gray-50 to-gray-200 dark:from-gray-900 dark:to-gray-800 px-8 lg:px-20 py-12 overflow-hidden transition-colors duration-500">
  <!-- Left Section -->
  <div class="lg:w-1/2 text-center lg:text-left mb-10 lg:mb-0 space-y-6 animate-fadeInUp">
    <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-900 dark:text-white leading-tight">
      Welcome to <span class="bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-500 dark:from-indigo-400 dark:to-purple-400">EventSphere</span>
    </h1>
    <p class="text-gray-600 dark:text-gray-300 text-lg max-w-md mx-auto lg:mx-0 animate-fadeInUp" style="animation-delay: 0.2s;">
      Manage your events, send invitations, and track attendees ‚Äî all in one beautiful platform.
    </p>
    <button class="mt-6 bg-gradient-to-r from-indigo-600 to-purple-500 hover:from-indigo-700 hover:to-purple-600 dark:from-indigo-500 dark:to-purple-400 dark:hover:from-indigo-600 dark:hover:to-purple-500 text-white px-6 py-3 rounded-full font-semibold transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 animate-fadeInUp" style="animation-delay: 0.3s;">
      Learn More
    </button>
  </div>

  <!-- Login Form -->
  <div class="lg:w-[420px] w-full bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg border border-gray-200/50 dark:border-gray-700/50 rounded-3xl shadow-xl p-8 sm:p-10 text-center animate-fadeInUp" style="animation-delay: 0.4s;">
    <div class="flex justify-center mb-6">
      <div class="w-14 h-14 rounded-full bg-gradient-to-r from-indigo-600 to-purple-500 dark:from-indigo-500 dark:to-purple-400 flex items-center justify-center shadow-md text-2xl animate-pulseGlow">
        üéüÔ∏è
      </div>
    </div>

    <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-2">Sign in to Continue</h2>
    <p class="text-gray-500 dark:text-gray-400 mb-6 text-sm animate-fadeInUp" style="animation-delay: 0.5s;">
      Access your events and stay organized
    </p>

    <form (ngSubmit)="onLogin()" class="space-y-5" autocomplete="on">
      <div>
        <label for="email" class="sr-only">Email</label>
        <input
          type="email"
          [(ngModel)]="email"
          name="email"
          id="email"
          autocomplete="email"
          placeholder="you@example.com"
          class="w-full px-4 py-3 rounded-lg bg-gray-50/50 dark:bg-gray-700/50 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 focus:scale-105 transition-all duration-300 animate-fadeInUp"
          style="animation-delay: 0.6s;"
          required
        />
      </div>

      <div>
        <label for="password" class="sr-only">Password</label>
        <input
          type="password"
          [(ngModel)]="password"
          name="password"
          id="password"
          autocomplete="current-password"
          placeholder="********"
          class="w-full px-4 py-3 rounded-lg bg-gray-50/50 dark:bg-gray-700/50 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 focus:scale-105 transition-all duration-300 animate-fadeInUp"
          style="animation-delay: 0.7s;"
          required
        />
      </div>

      <button
        type="submit"
        [disabled]="isLoading"
        class="w-full py-3 rounded-lg font-semibold text-white bg-gradient-to-r from-indigo-600 to-purple-500 hover:from-indigo-700 hover:to-purple-600 dark:from-indigo-500 dark:to-purple-400 dark:hover:from-indigo-600 dark:hover:to-purple-500 transition-all duration-300 shadow-md hover:shadow-xl transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed animate-pulseGlow animate-fadeInUp"
        style="animation-delay: 0.8s;"
      >
        {{ isLoading ? 'Loading...' : 'Login' }}
      </button>
    </form>

    <div *ngIf="errorMsg" class="mt-4 text-sm text-center bg-red-50/50 dark:bg-red-900/50 text-red-500 dark:text-red-400 rounded-lg p-2 animate-fadeInUp" style="animation-delay: 0.9s;">
      {{ errorMsg }}
    </div>
    <div *ngIf="successMsg" class="mt-4 text-sm text-center bg-green-50/50 dark:bg-green-900/50 text-green-500 dark:text-green-400 rounded-lg p-2 animate-fadeInUp" style="animation-delay: 0.9s;">
      {{ successMsg }}
    </div>

    <div class="flex justify-between mt-6 text-sm text-gray-500 dark:text-gray-400 animate-fadeInUp" style="animation-delay: 1s;">
      <a href="#" (click)="$event.preventDefault(); openForgotModal()" class="hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors duration-200 hover:underline">Forgot Password?</a>
      <a routerLink="/register" class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 font-semibold transition-colors duration-200 hover:underline">Create Account</a>
    </div>
  </div>
</div>

<!-- Forgot Password Modal -->
@if (showForgotModal) {
  <div class="fixed inset-0 z-50 flex items-center justify-center">
    <div class="absolute inset-0 bg-black/50" (click)="closeForgotModal()"></div>

    <div class="relative bg-white dark:bg-gray-800 rounded-xl shadow-xl w-11/12 max-w-md p-6">
      <h3 class="text-lg font-semibold mb-3 text-gray-900 dark:text-white">Reset Password</h3>
      <p class="text-sm text-gray-600 dark:text-gray-300 mb-4">
        Enter your account email and a new password. No verification code required.
      </p>

      <!-- ‚úÖ Wrapped in a form to satisfy browser a11y + autofill -->
      <form (ngSubmit)="resetPassword()" autocomplete="off" class="space-y-3">
        <div>
          <input
            type="email"
            [(ngModel)]="fpEmail"
            name="fpEmail"
            autocomplete="email"
            placeholder="you@example.com"
            class="w-full px-3 py-2 rounded border bg-gray-50 dark:bg-gray-700"
            required
          />
        </div>

        <div>
          <input
            type="password"
            [(ngModel)]="fpNewPassword"
            name="fpNewPassword"
            autocomplete="new-password"
            placeholder="New password"
            class="w-full px-3 py-2 rounded border bg-gray-50 dark:bg-gray-700"
            required
          />
        </div>

        <div>
          <input
            type="password"
            [(ngModel)]="fpConfirmPassword"
            name="fpConfirmPassword"
            autocomplete="new-password"
            placeholder="Confirm password"
            class="w-full px-3 py-2 rounded border bg-gray-50 dark:bg-gray-700"
            required
          />
        </div>

        <div class="mt-4 flex items-center justify-between">
          <div class="text-sm text-red-500">{{ fpMsg }}</div>
          <div class="flex items-center gap-2">
            <button type="button" (click)="closeForgotModal()" class="px-3 py-2 rounded bg-gray-200 dark:bg-gray-700">
              Cancel
            </button>
            <button type="submit" class="px-3 py-2 rounded bg-indigo-600 text-white">
              Reset
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
}
